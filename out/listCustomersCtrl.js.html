<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: app/scripts/controllers/listCustomersCtrl.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: app/scripts/controllers/listCustomersCtrl.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';
/**
 * @author      Raelen Recto
 * @version     0.0.1
 */
 
angular.module('testProjectApp')
  .controller('ListCustomersCtrl', ['$scope', '$location', '$modal', 'CustomerService', 
    function ($scope, $location, $modal, CustomerService) {
    
    // initializes $scope.customers
    var promiseGet = CustomerService.getCustomers();
    promiseGet.then(
      function (data) {
        $scope.customers = data.customerList;
        if (data.status === 'NO_CUSTOMERS_FOUND') $scope.successText = data.sucMessage;
      },
      function (data) {
        $scope.errorText = data.errMessage;
      });
    
    /**
     * Deletes a customer
     * @param id  id of customer to be deleted
     */
    $scope.delCustomer = function (id) {
      var promiseDel = CustomerService.delCustomer(id);
      promiseDel.then( 
        function (data) {
          $scope.customers = data.customerList;
          $scope.successText = data.sucMessage;
        },
        function (data) {
          $scope.errorText = data.errMessage;
        });
    }
    
    /**
     * Reroutes to add customer view
     */
    $scope.addCustomer = function () {
      $location.path('/addCustomer');
    }
    
    /**
     * Updates a customer
     * @param oldCustomerInfo  current info of customer to be updated
     */
    $scope.updateCustomer = function (oldCustomerInfo) {
      var modalInstance = $modal.open({
        templateUrl: 'updateCustomer.html',
        controller: UpdateCustomerCtrl,
        resolve: {
          oldCustomerInfo: function () {
            return oldCustomerInfo;
          }
        }
      });
      modalInstance.result.then(
        function (data) {
          $scope.successText = data.sucMessage;
          $scope.customers = data.customerList;
        },
        function (data) {
          $scope.errorText = data.errMessage;
        }
      );
    }
  }]);

/**
 * Controller for the modal to update customer
 */  
var UpdateCustomerCtrl = function ($scope, $modalInstance, CustomerService, oldCustomerInfo) {
  $scope.states = [ {name:'Alabama'}, {name:'Alaska'}, {name:'Arizona'}, {name:'Arkansas'}, {name:'California'}, {name:'Colorado'}, {name:'Connecticut'}, {name:'Delaware'}, {name:'District of Columbia'}, {name:'Florida'}, {name:'Georgia'}, 
          {name:'Hawaii'}, {name:'Idaho'}, {name:'Illinois'}, {name:'Indiana'}, {name:'Iowa'}, {name:'Kansas'}, {name:'Kentucky'}, {name:'Louisiana'}, {name:'Maine'}, {name:'Maryland'},
          {name:'Massachusetts'}, {name:'Michigan'}, {name:'Minnesota'}, {name:'Mississippi'}, {name:'Missouri'}, {name:'Montana'}, {name:'Nebraska'}, {name:'Nevada'}, {name:'New Hampshire'}, {name:'New Jersey'},
          {name:'New Mexico'}, {name:'New York'}, {name:'North Carolina'}, {name:'North Dakota'}, {name:'Ohio'}, {name:'Oklahoma'}, {name:'Oregon'}, {name:'Pennsylvania'}, {name:'Rhode Island'}, {name:'South Carolina'},
          {name:'South Dakota'}, {name:'Tennessee'}, {name:'Texas'}, {name:'Utah'}, {name:'Vermont'}, {name:'Virginia'}, {name:'Washington'}, {name:'West Virginia'}, {name:'Wisconsin'}, {name:'Wyoming'}];
  $scope.lastName = oldCustomerInfo.lastName;
  $scope.firstName = oldCustomerInfo.firstName;
  $scope.email = oldCustomerInfo.email;
  $scope.tel = oldCustomerInfo.telephone;
  $scope.street = oldCustomerInfo.street;
  $scope.city = oldCustomerInfo.city;
  $scope.state = oldCustomerInfo.state;
  $scope.zip = oldCustomerInfo.zip;  

  /**
   * Updates customer record
   * Upon closing, data is sent back to $scope.updateCustomer
   * @param lastName new last name of customer
   * @param firstName new first name of customer
   * @param email new email address of customer
   * @param tel new telephone number of customer
   * @param street new street address of customer
   * @param city new city of customer
   * @param state new state of customer
   * @param zip new zipcode of customer
   */
  $scope.update = function (lastName, firstName, email, tel, street, city, state, zip) {
    if (lastName === '' || firstName === '' || email === '' || tel === '' || street === '' || city === '' || state === '' || zip === '') {
      $scope.errorText = 'Please fill in all required fields.';
    } else {
      $scope.errorText = '';
      var promise = CustomerService.updateCustomer(oldCustomerInfo.id, lastName, firstName, email, tel, street, city, state, zip);
      promise.then(
        function(data) {
          $modalInstance.close(data);
        },
        function(data) {
          $modalInstance.close(data);
        }
      );    
    }
  }
  
  $scope.cancel = function () {
    $modalInstance.dismiss('cancel');
  };
  
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Global</h3><ul><li><a href="global.html#addCustomer">addCustomer</a></li><li><a href="global.html#delCustomer">delCustomer</a></li><li><a href="global.html#getCustomers">getCustomers</a></li><li><a href="global.html#getID">getID</a></li><li><a href="global.html#updateCustomer">updateCustomer</a></li><li><a href="global.html#UpdateCustomerCtrl">UpdateCustomerCtrl</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a> on Tue Apr 29 2014 23:48:03 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
